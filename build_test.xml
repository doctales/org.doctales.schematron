<?xml version="1.0" encoding="UTF-8"?>
<!-- 
  Copyright 2017 DOCTALES. All rights reserved.
  See the accompanying LICENSE file for applicable license.
-->
<project default="test">

    <import file="build_taskdef_ph-schematron.xml"/>
    <import file="build_taskdef_ant-contrib.xml"/>
    
    <property name="dita.dir" location="${user.dir}/dita-ot"/>

    <xmlcatalog id="dita.catalog">
        <catalogpath path="${dita.dir}/plugins/org.dita.base/catalog-dita.xml"/>
    </xmlcatalog>

    <target name="test">
        <echo>dita.dir=${dita.dir}</echo>
        <schematron
            schematronFile="${basedir}/rules/topic-validation.sch"
            expectSuccess="true"
            schematronProcessingEngine="pure">
            <fileset dir="${basedir}">
                <include name="samples/*.dita"/>
            </fileset>
            <xmlcatalog refid="dita.catalog"/>
        </schematron>
    </target>
</project>